---
title: Facegen
description: About facegen and how it determines NPC appearance.
published: true
date: 2023-08-18T15:07:42.994Z
tags: 
editor: markdown
dateCreated: 2023-08-18T15:07:42.994Z
---

# Facegen

**Facegen** is data generated with the Creation Kit that defines an NPC's appearance, specifically of its head. It consists of a **mesh** and a **texture** named after the NPC's Form ID.

For example, the [Form ID](/knowledge-base/plugins/#form-ids) for **Serana's** NPC record is `02002B6C`. Her appearance is defined in this record which the Creation Kit uses to generate facegen data for her.

![serana-in-xedit.png](/knowledge-base/serana-in-xedit.png){.align-center}

Her facegen thus consists of:

- `\meshes\actors\character\facegendata\facegeom\dawnguard.esm\00002b6c.nif`
- `\textures\actors\character\facegendata\facetint\dawnguard.esm\00002b6c.dds`

> You may have noticed that the **Index** (first two characters) in the Form ID names of these files does not match the plugin (Dawnguard should have the Index 02). This is because the Index is defined by the load order. If it were part of the facegen assets' filenames, they would have to be renamed or regenerated every time the load order changed.
>
>To prevent this, facegen files always have the Index 00, but are tied to the name of the plugin in which the NPC originates.
{.is-info}

This is what you see when you preview the mesh in NifSkope:

![serana-facegen.png](/knowledge-base/serana-facegen.png){.align-center}

## Black Face Bug

The infamous "black face bug" is what occurs when facegen assets are either missing (the above mentioned texture and/or mesh cannot be found), or mismatched (the mesh does not match the head parts defined in the record). When the facetint texture is not loaded, NPC's faces will simply appear dark brown or black.

Mismatched facegen typically happens when using a mod that modifies the appearance of an NPC in a plugin and contains new facegen data based on those modifications, but the plugin is then overwritten by another. This can be fixed with a very simple conflict resolution patch forwarding the first plugins's appearance changes and merging them with whatever the second plugin does.

> Facegen can be generated at runtime by [Face Discoloration Fix](https://www.nexusmods.com/skyrimspecialedition/mods/42441) which will prevent the black face bug. Please note that doing so is slower than loading pregenerated facegen so it is advisable to pre-generate facegen in the Creation Kit even when using the mod.
{.is-info}

## Managing Facegen Assets

Facegen assets are regular assets that adhere to overwrite rules in the Mod Organizer 2 mod order. They can be installed as loose files or packed into BSAs in which case loose facegen files overwrite BSA-packed ones.

As you can see from the file paths for facegen assets, you need to be careful when renaming plugins that contain new NPCs or changing their Form IDs. Doing so would break all facegen associated with the plugins or forms, and you would have to rename the folder or files, respectively.

# Regenerating Facegen

Facegen needs to be regenerated when:

1. Changes to Head Parts, Tint Layers, etc, were made in the NPC's record.
2. New meshes for head parts (hair, eyes, mouth) were installed.
3. New textures for tint masks (make up, war paints, dirt overlays) were installed.

New head part or tint mask assets will not cause the black face bug, but they will also not appear on NPCs until their facegen is regenerated with those assets installed.

## Autogenerated Facegen

The Creation Kit likes to generate facegen even when a plugin made no changes that require it. Fortunately, [SSE Creation Kit Fixes](/skyforge/tool-setup/creation-kit/#creation-kit-fixes) already disables this in its INI file:

```
[CreationKit_FaceGen]
DisableAutoFaceGen=true
```

Leave autogeneration disabled and manually export facegen when it is actually necessary.

## Custom Facegen

Regenerating and exporting facegen for all NPCs (vanilla and mod-added) can be done as one of the final steps in building a setup. This will apply higher-quality assets to NPCs' faces which can go a long way toward increasing quality *and* consistency. It is also not particularly complicated or time-consuming.

If you are using NPC overhauls, it is still worth it to regenerate facegen as overhauls rarely cover *all* NPCs in the vanilla game, and certainly not those added by other mods. You can either delete overlapping facegen or simply make sure that your facegen output is being overwritten by whichever mod(s) you installed.

You can find instructions on how to regenerate facegen [here](/guides-tutorials/regenerating-facegen).

> It is <u>not</u> possible to regenerate facegen for **children** the same way. As there are few children in the game, using a pre-made overhaul from the Nexus is perfectly sufficient.
{.is-danger}
